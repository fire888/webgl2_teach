!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);const{min:r}=Math;function o(){let t,n=function(){const t=document.createElement("canvas");t.width=t.height=r(window.innerHeight,window.innerWidth),document.body.appendChild(t),document.body.style.textAlign="center";const n=t.getContext("webgl");return window.addEventListener("resize",()=>{t.width=t.height=r(window.innerHeight,window.innerWidth)}),console.log(n.getParameter(n.SHADING_LANGUAGE_VERSION)),n}(),e=null;function o(t,e){const r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS))return r;console.log("compile sh error")}return{prepareProgram:function(e,r){const i=o(n.VERTEX_SHADER,e),a=o(n.FRAGMENT_SHADER,r);t=function(t,e){const r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),n.useProgram(r),n.getProgramParameter(r,n.LINK_STATUS))return r;console.log("program compile error")}(i,a)},createBufferByData:function(e){const{name:r,dataForBuffer:o,size:i}=e;return{location:n.getAttribLocation(t,r),buffer:n.createBuffer()}},fillBufferByData:function(t){const{buffer:e,dataForBuffer:r,size:o}=t;return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,r,n.STATIC_DRAW),{bufferLength:r.length/o}},createTextureBufferByImage:function(t){const{image:e}=t,r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.generateMipmap(n.TEXTURE_2D),{texture:r}},createTextureByData:function(t){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);const{arrTexture:r,width:o,height:i}=t,a=n.RGB,c=n.RGB,u=n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_ALIGNMENT,1),n.texImage2D(n.TEXTURE_2D,0,a,o,i,0,c,u,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)},getUniformLocation:function(e){const{name:r}=e;return{location:n.getUniformLocation(t,r)}},prepareRender:function(e){n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(...e,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.useProgram(t)},setAttributes:function(t){for(let r in t){const{buffer:o,bufferLength:i,location:a,size:c,type:u}=t[r];n.enableVertexAttribArray(a),n.bindBuffer(n.ARRAY_BUFFER,o),n.vertexAttribPointer(a,c,n[u],!1,0,0),e=i}},setUniforms:function(t){for(let e in t){const{execSetVal:r,val:o,location:i}=t[e];"uniformMatrix4fv"===r?n[r](i,!1,o):n[r](i,o)}},render:function(){n.drawArrays(n.TRIANGLES,0,e)}}}const i=(()=>{let t=[],n=[],e=[];return{add4Points:r=>{4!==r.length&&console.log("add4Points data mistake",r),t.push(r[0][0],r[0][1],r[0][2],r[1][0],r[1][1],r[1][2],r[2][0],r[2][1],r[2][2],r[1][0],r[1][1],r[1][2],r[3][0],r[3][1],r[3][2],r[2][0],r[2][1],r[2][2]),n.push(0,0,0,1,1,0,0,1,1,1,1,0),e.push(0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1)},add3Points:r=>{3!==r.length&&console.log("add3Points data mistake",r),t.push(r[0][0],r[0][1],r[0][2],r[1][0],r[1][1],r[1][2],r[2][0],r[2][1],r[2][2]),n.push(0,0,.5,1,1,0);const o=Math.min((r[0][0]+r[1][0]+r[2][0])/3,1),i=Math.min((r[0][1]+r[1][1]+r[2][1])/3,1),a=Math.min((r[0][2]+r[1][2]+r[2][2])/3,1);e.push(o,i,a,o,i,a,o,i,a)},getCompletedGeometry:()=>({points:new Float32Array(t),uv:new Float32Array(n),normals:new Float32Array(e)}),clear:()=>{t=[],n=[],e=[]}}})(),{PI:a,sin:c,cos:u}=Math,s=2*a;let l=9;const f=2.5,d=(t,n)=>{i.clear(),l=t;const e=-5-c(n),r=5+u(n),o=(()=>{const t=[];for(let e=0;e<l;++e)t.push([c(s*(e/l))*f,u(e/l*s*2)*n*2-3,u(s*(e/l))*f]);return t})(),a=(()=>{const t=[],e=s/l/2;for(let r=0;r<l;++r)t.push([c(s*(r/l)+e)*f,3+c(r/l*s*2)*n*2,u(s*(r/l)+e)*f]);return t})();for(let t=0;t<l;++t)t<l-1&&(i.add3Points([o[t],[0,e,0],o[t+1]]),i.add3Points([o[t+1],a[t],o[t]]),i.add3Points([a[t],o[t+1],a[t+1]]),i.add3Points([a[t+1],[0,r,0],a[t]])),t===l-1&&(i.add3Points([o[t],[0,e,0],o[0]]),i.add3Points([o[0],a[t],o[t]]),i.add3Points([a[t],o[0],a[0]]),i.add3Points([a[0],[0,r,0],a[t]]));const{points:d,uv:m,normals:v}=i.getCompletedGeometry();return{a_position:d,a_texcoord:m,a_normal:v}};let m=Float32Array;function v(t,n,e){return(e=e||new m(3))[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function _(t,n){n=n||new m(3);var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e>1e-5&&(n[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e),n}function h(t,n,e){return(e=e||new m(3))[0]=t[1]*n[2]-t[2]*n[1],e[1]=t[2]*n[0]-t[0]*n[2],e[2]=t[0]*n[1]-t[1]*n[0],e}function g(t,n){const e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2];return e*e+r*r+o*o}function w(t,n){n=n||new m(16);var e=t[0],r=t[1],o=t[2],i=t[3],a=t[4],c=t[5],u=t[6],s=t[7],l=t[8],f=t[9],d=t[10],v=t[11],_=t[12],h=t[13],g=t[14],w=t[15],p=d*w,T=g*v,E=u*w,P=g*s,b=u*v,y=d*s,R=o*w,A=g*i,x=o*v,M=d*i,L=o*s,D=u*i,B=l*h,S=_*f,U=a*h,F=_*c,V=a*f,I=l*c,O=e*h,j=_*r,z=e*f,G=l*r,N=e*c,C=a*r,X=p*c+P*f+b*h-(T*c+E*f+y*h),W=T*r+R*f+M*h-(p*r+A*f+x*h),q=E*r+A*c+L*h-(P*r+R*c+D*h),H=y*r+x*c+D*f-(b*r+M*c+L*f),k=1/(e*X+a*W+l*q+_*H);return n[0]=k*X,n[1]=k*W,n[2]=k*q,n[3]=k*H,n[4]=k*(T*a+E*l+y*_-(p*a+P*l+b*_)),n[5]=k*(p*e+A*l+x*_-(T*e+R*l+M*_)),n[6]=k*(P*e+R*a+D*_-(E*e+A*a+L*_)),n[7]=k*(b*e+M*a+L*l-(y*e+x*a+D*l)),n[8]=k*(B*s+F*v+V*w-(S*s+U*v+I*w)),n[9]=k*(S*i+O*v+G*w-(B*i+j*v+z*w)),n[10]=k*(U*i+j*s+N*w-(F*i+O*s+C*w)),n[11]=k*(I*i+z*s+C*v-(V*i+G*s+N*v)),n[12]=k*(U*d+I*g+S*u-(V*g+B*u+F*d)),n[13]=k*(z*g+B*o+j*d-(O*d+G*g+S*o)),n[14]=k*(O*u+C*g+F*o-(N*g+U*o+j*u)),n[15]=k*(N*d+V*o+G*u-(z*u+C*d+I*o)),n}const p={copy:function(t,n){return(n=n||new m(16))[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},lookAt:function(t,n,e,r){r=r||new m(16);var o=_(v(t,n)),i=_(h(e,o)),a=_(h(o,i));return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=0,r[4]=a[0],r[5]=a[1],r[6]=a[2],r[7]=0,r[8]=o[0],r[9]=o[1],r[10]=o[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},addVectors:function(t,n,e){return(e=e||new m(3))[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},subtractVectors:v,scaleVector:function(t,n,e){return(e=e||new m(3))[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},distance:function(t,n){return Math.sqrt(g(t,n))},distanceSq:g,normalize:_,compose:function(t,n,e,r){r=r||new m(16);const o=n[0],i=n[1],a=n[2],c=n[3],u=o+o,s=i+i,l=a+a,f=o*u,d=o*s,v=o*l,_=i*s,h=i*l,g=a*l,w=c*u,p=c*s,T=c*l,E=e[0],P=e[1],b=e[2];return r[0]=(1-(_+g))*E,r[1]=(d+T)*E,r[2]=(v-p)*E,r[3]=0,r[4]=(d-T)*P,r[5]=(1-(f+g))*P,r[6]=(h+w)*P,r[7]=0,r[8]=(v+p)*b,r[9]=(h-w)*b,r[10]=(1-(f+_))*b,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},cross:h,decompose:function(t,n,e,r){let o=p.length(t.slice(0,3));const i=p.length(t.slice(4,7)),a=p.length(t.slice(8,11));var c,u,s,l,f,d,m,v,_,h,g,w,T,E,P,b,y,R,A,x,M,L,D,B,S,U,F,V,I;(u=(c=t)[0],s=c[1],l=c[2],f=c[3],d=c[4],m=c[5],v=c[6],_=c[7],h=c[8],g=c[9],w=c[10],T=c[11],E=c[12],P=c[13],b=c[14],y=c[15],1/(u*((R=w*y)*m+(M=b*_)*g+(L=v*T)*P-((A=b*T)*m+(x=v*y)*g+(D=w*_)*P))+d*(A*s+(B=l*y)*g+(F=w*f)*P-(R*s+(S=b*f)*g+(U=l*T)*P))+h*(x*s+S*m+(V=l*_)*P-(M*s+B*m+(I=v*f)*P))+E*(D*s+U*m+I*g-(L*s+F*m+V*g))))<0&&(o=-o),n[0]=t[12],n[1]=t[13],n[2]=t[14];const O=p.copy(t),j=1/o,z=1/i,G=1/a;O[0]*=j,O[1]*=j,O[2]*=j,O[4]*=z,O[5]*=z,O[6]*=z,O[8]*=G,O[9]*=G,O[10]*=G,function(t,n){const e=t[0],r=t[4],o=t[8],i=t[1],a=t[5],c=t[9],u=t[2],s=t[6],l=t[10],f=e+a+l;if(f>0){const t=.5/Math.sqrt(f+1);n[3]=.25/t,n[0]=(s-c)*t,n[1]=(o-u)*t,n[2]=(i-r)*t}else if(e>a&&e>l){const t=2*Math.sqrt(1+e-a-l);n[3]=(s-c)/t,n[0]=.25*t,n[1]=(r+i)/t,n[2]=(o+u)/t}else if(a>l){const t=2*Math.sqrt(1+a-e-l);n[3]=(o-u)/t,n[0]=(r+i)/t,n[1]=.25*t,n[2]=(c+s)/t}else{const t=2*Math.sqrt(1+l-e-a);n[3]=(i-r)/t,n[0]=(o+u)/t,n[1]=(c+s)/t,n[2]=.25*t}}(O,e),r[0]=o,r[1]=i,r[2]=a},dot:function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},identity:function(t){return(t=t||new m(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,n){return(n=n||new m(16))[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15],n},length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},lengthSq:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},orthographic:function(t,n,e,r,o,i,a){return(a=a||new m(16))[0]=2/(n-t),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(r-e),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(o-i),a[11]=0,a[12]=(t+n)/(t-n),a[13]=(e+r)/(e-r),a[14]=(o+i)/(o-i),a[15]=1,a},frustum:function(t,n,e,r,o,i,a){var c=n-t,u=r-e,s=i-o;return(a=a||new m(16))[0]=2*o/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/u,a[6]=0,a[7]=0,a[8]=(t+n)/c,a[9]=(r+e)/u,a[10]=-(i+o)/s,a[11]=-1,a[12]=0,a[13]=0,a[14]=-2*o*i/s,a[15]=0,a},perspective:function(t,n,e,r,o){o=o||new m(16);var i=Math.tan(.5*Math.PI-.5*t),a=1/(e-r);return o[0]=i/n,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(e+r)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=e*r*a*2,o[15]=0,o},translation:function(t,n,e,r){return(r=r||new m(16))[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=t,r[13]=n,r[14]=e,r[15]=1,r},translate:function(t,n,e,r,o){o=o||new m(16);var i=t[0],a=t[1],c=t[2],u=t[3],s=t[4],l=t[5],f=t[6],d=t[7],v=t[8],_=t[9],h=t[10],g=t[11],w=t[12],p=t[13],T=t[14],E=t[15];return t!==o&&(o[0]=i,o[1]=a,o[2]=c,o[3]=u,o[4]=s,o[5]=l,o[6]=f,o[7]=d,o[8]=v,o[9]=_,o[10]=h,o[11]=g),o[12]=i*n+s*e+v*r+w,o[13]=a*n+l*e+_*r+p,o[14]=c*n+f*e+h*r+T,o[15]=u*n+d*e+g*r+E,o},xRotation:function(t,n){n=n||new m(16);var e=Math.cos(t),r=Math.sin(t);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e,n[6]=r,n[7]=0,n[8]=0,n[9]=-r,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},yRotation:function(t,n){n=n||new m(16);var e=Math.cos(t),r=Math.sin(t);return n[0]=e,n[1]=0,n[2]=-r,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=r,n[9]=0,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},zRotation:function(t,n){n=n||new m(16);var e=Math.cos(t),r=Math.sin(t);return n[0]=e,n[1]=r,n[2]=0,n[3]=0,n[4]=-r,n[5]=e,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},xRotate:function(t,n,e){e=e||new m(16);var r=t[4],o=t[5],i=t[6],a=t[7],c=t[8],u=t[9],s=t[10],l=t[11],f=Math.cos(n),d=Math.sin(n);return e[4]=f*r+d*c,e[5]=f*o+d*u,e[6]=f*i+d*s,e[7]=f*a+d*l,e[8]=f*c-d*r,e[9]=f*u-d*o,e[10]=f*s-d*i,e[11]=f*l-d*a,t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e},yRotate:function(t,n,e){e=e||new m(16);var r=t[0],o=t[1],i=t[2],a=t[3],c=t[8],u=t[9],s=t[10],l=t[11],f=Math.cos(n),d=Math.sin(n);return e[0]=f*r-d*c,e[1]=f*o-d*u,e[2]=f*i-d*s,e[3]=f*a-d*l,e[8]=f*c+d*r,e[9]=f*u+d*o,e[10]=f*s+d*i,e[11]=f*l+d*a,t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e},zRotate:function(t,n,e){e=e||new m(16);var r=t[0],o=t[1],i=t[2],a=t[3],c=t[4],u=t[5],s=t[6],l=t[7],f=Math.cos(n),d=Math.sin(n);return e[0]=f*r+d*c,e[1]=f*o+d*u,e[2]=f*i+d*s,e[3]=f*a+d*l,e[4]=f*c-d*r,e[5]=f*u-d*o,e[6]=f*s-d*i,e[7]=f*l-d*a,t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e},axisRotation:function(t,n,e){e=e||new m(16);var r=t[0],o=t[1],i=t[2],a=Math.sqrt(r*r+o*o+i*i),c=(r/=a)*r,u=(o/=a)*o,s=(i/=a)*i,l=Math.cos(n),f=Math.sin(n),d=1-l;return e[0]=c+(1-c)*l,e[1]=r*o*d+i*f,e[2]=r*i*d-o*f,e[3]=0,e[4]=r*o*d-i*f,e[5]=u+(1-u)*l,e[6]=o*i*d+r*f,e[7]=0,e[8]=r*i*d+o*f,e[9]=o*i*d-r*f,e[10]=s+(1-s)*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},axisRotate:function(t,n,e,r){r=r||new m(16);var o=n[0],i=n[1],a=n[2],c=Math.sqrt(o*o+i*i+a*a),u=(o/=c)*o,s=(i/=c)*i,l=(a/=c)*a,f=Math.cos(e),d=Math.sin(e),v=1-f,_=u+(1-u)*f,h=o*i*v+a*d,g=o*a*v-i*d,w=o*i*v-a*d,p=s+(1-s)*f,T=i*a*v+o*d,E=o*a*v+i*d,P=i*a*v-o*d,b=l+(1-l)*f,y=t[0],R=t[1],A=t[2],x=t[3],M=t[4],L=t[5],D=t[6],B=t[7],S=t[8],U=t[9],F=t[10],V=t[11];return r[0]=_*y+h*M+g*S,r[1]=_*R+h*L+g*U,r[2]=_*A+h*D+g*F,r[3]=_*x+h*B+g*V,r[4]=w*y+p*M+T*S,r[5]=w*R+p*L+T*U,r[6]=w*A+p*D+T*F,r[7]=w*x+p*B+T*V,r[8]=E*y+P*M+b*S,r[9]=E*R+P*L+b*U,r[10]=E*A+P*D+b*F,r[11]=E*x+P*B+b*V,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},scaling:function(t,n,e,r){return(r=r||new m(16))[0]=t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},scale:function(t,n,e,r,o){return(o=o||new m(16))[0]=n*t[0],o[1]=n*t[1],o[2]=n*t[2],o[3]=n*t[3],o[4]=e*t[4],o[5]=e*t[5],o[6]=e*t[6],o[7]=e*t[7],o[8]=r*t[8],o[9]=r*t[9],o[10]=r*t[10],o[11]=r*t[11],t!==o&&(o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o},multiply:function(t,n,e){e=e||new m(16);var r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],u=n[5],s=n[6],l=n[7],f=n[8],d=n[9],v=n[10],_=n[11],h=n[12],g=n[13],w=n[14],p=n[15],T=t[0],E=t[1],P=t[2],b=t[3],y=t[4],R=t[5],A=t[6],x=t[7],M=t[8],L=t[9],D=t[10],B=t[11],S=t[12],U=t[13],F=t[14],V=t[15];return e[0]=r*T+o*y+i*M+a*S,e[1]=r*E+o*R+i*L+a*U,e[2]=r*P+o*A+i*D+a*F,e[3]=r*b+o*x+i*B+a*V,e[4]=c*T+u*y+s*M+l*S,e[5]=c*E+u*R+s*L+l*U,e[6]=c*P+u*A+s*D+l*F,e[7]=c*b+u*x+s*B+l*V,e[8]=f*T+d*y+v*M+_*S,e[9]=f*E+d*R+v*L+_*U,e[10]=f*P+d*A+v*D+_*F,e[11]=f*b+d*x+v*B+_*V,e[12]=h*T+g*y+w*M+p*S,e[13]=h*E+g*R+w*L+p*U,e[14]=h*P+g*A+w*D+p*F,e[15]=h*b+g*x+w*B+p*V,e},inverse:w,transformVector:function(t,n,e){e=e||new m(4);for(var r=0;r<4;++r){e[r]=0;for(var o=0;o<4;++o)e[r]+=n[o]*t[4*o+r]}return e},transformPoint:function(t,n,e){e=e||new m(3);var r=n[0],o=n[1],i=n[2],a=r*t[3]+o*t[7]+i*t[11]+t[15];return e[0]=(r*t[0]+o*t[4]+i*t[8]+t[12])/a,e[1]=(r*t[1]+o*t[5]+i*t[9]+t[13])/a,e[2]=(r*t[2]+o*t[6]+i*t[10]+t[14])/a,e},transformDirection:function(t,n,e){e=e||new m(3);var r=n[0],o=n[1],i=n[2];return e[0]=r*t[0]+o*t[4]+i*t[8],e[1]=r*t[1]+o*t[5]+i*t[9],e[2]=r*t[2]+o*t[6]+i*t[10],e},transformNormal:function(t,n,e){e=e||new m(3);var r=w(t),o=n[0],i=n[1],a=n[2];return e[0]=o*r[0]+i*r[1]+a*r[2],e[1]=o*r[4]+i*r[5]+a*r[6],e[2]=o*r[8]+i*r[9]+a*r[10],e},setDefaultType:function(t){const n=m;return m=t,n}};let T=0;const{a_position:E,a_texcoord:P,a_normal:b}=d(0),y={a_position:{name:"a_position",getLocation:"getAttribLocation",location:null,size:3,type:"FLOAT",dataForBuffer:E,buffer:null},a_texcoord:{name:"a_texcoord",getLocation:"getAttribLocation",location:null,size:2,type:"FLOAT",dataForBuffer:P,buffer:null},a_normal:{name:"a_normal",getLocation:"getAttribLocation",location:null,size:3,type:"FLOAT",dataForBuffer:b,buffer:null}},R={u_viewWorldPosition:{name:"u_viewWorldPosition",getLocation:"getUniformLocation",location:null,execSetVal:"uniform3fv",val:null},u_worldViewProjection:{name:"u_worldViewProjection",getLocation:"getUniformLocation",location:null,execSetVal:"uniformMatrix4fv",val:null},u_color:{name:"u_color",getLocation:"getUniformLocation",location:null,execSetVal:"uniform3fv",val:[1,1,1]}};!function(){const t=o();t.prepareProgram("\nattribute vec4 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_world;\nuniform mat4 u_worldViewProjection;\nuniform vec3 u_viewWorldPosition;\n\nvarying vec3 v_normal;\nvarying vec3 v_surfaceToLight;\nvarying vec3 v_surfaceToView;\nvarying vec2 v_texcoord;\n\nvoid main() {\n  gl_Position = u_worldViewProjection * a_position;\n\n  v_normal = mat3(u_worldViewProjection) * a_normal;\n  v_texcoord = a_texcoord;\n\n  vec3 surfaceWorldPosition = (u_worldViewProjection * a_position).xyz;\n  vec3 lightPos = vec3(0, 5., 0.);\n  v_surfaceToLight = lightPos - surfaceWorldPosition;\n  v_surfaceToView = u_viewWorldPosition - surfaceWorldPosition;\n}\n","precision mediump float;\nuniform vec3 u_color;\n\nvarying vec3 v_normal;\nvarying vec3 v_surfaceToLight;\nvarying vec3 v_surfaceToView;\nvarying vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n    vec3 normal = normalize(v_normal);\n    \n    vec3 surfaceToLightDirection = normalize(v_surfaceToLight);\n    vec3 surfaceToViewDirection = normalize(v_surfaceToView);\n    vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);\n\n\n    float light = dot(normal, surfaceToLightDirection);\n    float specular = 0.0;\n    if (light > 0.95) {\n        specular = pow(dot(normal, halfVector), 10.);\n    }\n \n    \n    gl_FragColor = vec4(u_color + light, 1.) * texture2D(u_texture, v_texcoord);\n    gl_FragColor.rgb += clamp(specular, 0., 1.);\n}\n");for(let n in y){const{location:e,buffer:r}=t.createBufferByData(y[n]);Object.assign(y[n],{location:e,buffer:r})}t.setAttributes(y);for(let n in R){const{location:e}=t.getUniformLocation(R[n]);Object.assign(R[n],{location:e})}const n={arr:new Uint8Array([128,0,0,128,0,0,128,0,0,128,0,0,128,0,0,128,0,0,0,0,0,0,0,0,0,0,0,128,0,0,128,0,0,128,0,0,128,0,0,128,0,0,128,0,0]),w:3,h:5};t.createTextureByData({arrTexture:n.arr,width:n.w,height:n.h});const e=p.perspective(1.8,1,.01,50),r=[0,0,10];R.u_viewWorldPosition.val=r;const i=p.lookAt(r,[0,0,0],[0,1,0]),a=p.inverse(i),c=p.multiply(e,a);let u=0,s=5;const l=n=>{++u,u>0&&(u=30,T+=s,T>70&&(s=-1),T<20&&(s=1)),((n,e)=>{const r=d(n,e);for(let n in y){const{bufferLength:e}=t.fillBufferByData({buffer:y[n].buffer,dataForBuffer:r[n],size:y[n].size});Object.assign(y[n],{bufferLength:e})}})(T,Math.sin(n/2)),t.setAttributes(y);t.prepareRender([.1,.1,.1]);const e=p.yRotation(n/15),r=p.xRotation(n/30);R.u_worldViewProjection.val=p.multiply(p.multiply(c,e),r),t.setUniforms(R),t.render()};let f=0;const m=()=>{f+=.12,l(f),requestAnimationFrame(m)};m()}()}]);